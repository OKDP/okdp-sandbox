apiVersion: v1alpha1
name: local-secrets-provider
tag: 1.0.0-p01
protected: false
description: |
  A centralized Helm chart for managing and distributing local testing shared configurations, 
  secrets, services, and environment variables across multiple platform components.
usage:
  text: |
    A centralized Helm chart for managing and distributing local testing shared configurations,
    secrets, services, and environment variables across multiple platform components.
modules:
  - name: main
    timeout: 10m
    source:
      local:
        path: ./chart
    values: |
      # In order to have predictable behaviour, we provision the secrets statically
      secrets:
       # Hive metastore
       - name: {{ .Context.hiveMetastore.database.credentialsSecret.name }}
         {{ .Context.hiveMetastore.database.credentialsSecret.usernameKey }}: "hms"
         {{ .Context.hiveMetastore.database.credentialsSecret.passwordKey }}: "hms123"
       - name: {{ .Context.hiveMetastore.storage.s3.credentialsSecret.name }}
         {{ .Context.hiveMetastore.storage.s3.credentialsSecret.accessKeyKey }}: "hive-metastore"
         {{ .Context.hiveMetastore.storage.s3.credentialsSecret.secretKeyKey }}: "rdwFp4MRhDnGGsSJpNQ0CiMIFz56VseWIPMWgKBe"
       # Trino
       - name: {{ .Context.trino.storage.s3.credentialsSecret.name }}
         {{ .Context.trino.storage.s3.credentialsSecret.accessKeyKey }}: "trino"
         {{ .Context.trino.storage.s3.credentialsSecret.secretKeyKey }}: "IthuzMjA3fWjGNdHCxE0KaJhx2zY8pxZmmkEqxHg"
       # Superset
       - name: {{ .Context.superset.database.credentialsSecret.name }}
         {{ .Context.superset.database.credentialsSecret.usernameKey }}: "superset"
         {{ .Context.superset.database.credentialsSecret.passwordKey }}: "superset123"
       - name: {{ .Context.superset.secret.name }}
         {{ .Context.superset.secret.key }}: "22NJRoghIFHFK6vo7wWB+m/8TL//eKEo7phKEhGtsGiBLkLpx5WKA7k7"
       - name: {{ .Context.superset.redis.credentialsSecret.name }}
         {{ .Context.superset.redis.credentialsSecret.usernameKey }}: "redis"
         {{ .Context.superset.redis.credentialsSecret.passwordKey }}: "redis123"
       - name: {{ .Context.superset.load_examples.database.credentialsSecret.name }}
         {{ .Context.superset.load_examples.database.credentialsSecret.usernameKey }}: "examples"
         {{ .Context.superset.load_examples.database.credentialsSecret.passwordKey }}: "examples123"
       # OIDC
       - name: {{ .Context.superset.auth.oidc.credentialsSecret.name }}
         {{ .Context.superset.auth.oidc.credentialsSecret.clientIdKey }}: "confidential-oidc-client"
         {{ .Context.superset.auth.oidc.credentialsSecret.clientSecretKey }}: "secret1"
       # Jupyter
       - name: {{ .Context.jupyter.storage.s3.credentialsSecret.name }}
         {{ .Context.jupyter.storage.s3.credentialsSecret.accessKeyKey }}: "jupyter"
         {{ .Context.jupyter.storage.s3.credentialsSecret.secretKeyKey }}: "4xABAzx5eHAfjf6SSbwFegO3eqrcz3yePEZH2oQz"
       # OKDP examples
       - name: {{ .Context.examples.storage.s3.credentialsSecret.name }}
         {{ .Context.examples.storage.s3.credentialsSecret.accessKeyKey }}: "okdp-examples"
         {{ .Context.examples.storage.s3.credentialsSecret.secretKeyKey }}: "DiP4JtyptKQIVyEufZu2l74WIWYH5fK1tz6GrXgH"
       # Spark History
       - name: {{ .Context.sparkHistory.storage.s3.credentialsSecret.name }}
         {{ .Context.sparkHistory.storage.s3.credentialsSecret.accessKeyKey }}: "spark-history"
         {{ .Context.sparkHistory.storage.s3.credentialsSecret.secretKeyKey }}: "9xWCGP9DWn4r9ikF4VhhOfBzbJsO0FpgW7DmIjQh"
       # keycloak
       - name: {{ .Context.keycloak.database.credentialsSecret.name }}
         {{ .Context.keycloak.database.credentialsSecret.usernameKey }}: "keycloak"
         {{ .Context.keycloak.database.credentialsSecret.passwordKey }}: "keycloak123"
roles:
  - external-secrets
